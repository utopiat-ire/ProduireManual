<!doctype html>
<html lang="ja"><!-- InstanceBegin template="/Templates/reference2020.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- InstanceBeginEditable name="doctitle" -->
	<title>正規表現 - プロデルマニュアル</title><!-- InstanceEndEditable -->
	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<link href="../css/style.css" rel="stylesheet">
	<link href="../css/ie10-viewport-bug-workaround.css" rel="stylesheet">
	<script src="../js/html5shiv-3.7.3.min.js"></script>
	<script src="../js/respond-1.4.2.min.js"></script>
<!-- InstanceBeginEditable name="head" -->	<meta name="description" content="日本語プログラミング言語プロデルの「正規表現」種類に含まれる手順や設定項目を使う方法"><!-- InstanceEndEditable -->
	<meta name="author" content="utopiat.net">
</head>

<body>
	<nav class="navbar navbar-fixed-top navbar-inverse">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">メニュー開閉</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="../index.htm"><img src="../img/rdr2018-32.png" class="rdricon" alt="プロデル"></a>
				<a class="navbar-brand" href="#">
					<!-- InstanceBeginEditable name="HeaderTitle" -->正規表現<!-- InstanceEndEditable -->
				</a>
			</div>
			<div id="navbar" class="collapse navbar-collapse">
				<ul class="nav navbar-nav navbar-right">
					<li id="cat_top"><a href="../index.htm">目次</a></li>
					<li id="cat_syntax"><a href="../syntax/index.htm">言語仕様</a></li>
					<li id="cat_lookup"><a href="../lookup/index.htm">逆引き辞典</a></li>
					<li id="cat_datatype"><a href="../primitive/index.htm">データ型</a></li>
					<li id="cat_gui" class="hidden-sm"><a href="../wincontrol/index.htm">GUI部品</a></li>
					<li id="cat_verbs" class="hidden-sm"><a href="../verbs/index.html">手順一覧</a></li>
					<li id="cat_devenv" class="hidden-sm"><a href="../devenv/index.html">開発環境</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">機能別 <span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li id="cat_core"><a href="index.htm">基本機能</a></li>
							<li id="cat_file"><a href="../file/index.htm">ファイル操作</a></li>
							<li id="cat_graphics"><a href="../pgraphics/index.htm">画像描画</a></li>
							<li id="cat_office"><a href="../office/index.htm">Microsoft Office操作</a></li>
							<li id="cat_data"><a href="../data/index.htm">データ形式/データベース</a></li>
							<li id="cat_net"><a href="../network/index.htm">ネットワーク</a></li>
							<li id="cat_mail"><a href="../network/mail/index.htm">メール</a></li>
							<li class="divider"></li>
							<li id="cat_system"><a href="../plugins/systeminfo/index.htm">システム情報取得</a></li>
							<li id="cat_media"><a href="../plugins/multimedia/index.htm">メディア再生制御</a></li>
							<li id="cat_crypto"><a href="../plugins/crypto/index.htm">暗号化/ハッシュ計算</a></li>
							<li id="cat_speech"><a href="../plugins/speech/index.htm">音声処理</a></li>
							<li id="cat_reflection"><a href="reflection/index.htm">リフレクション</a></li>
							<li id="cat_msil"><a href="../plugins/msil/index.htm">MSIL生成</a></li>
							<li><a href="../tools/web/index.htm">Webアプリ</a></li>
							<li class="divider"></li>
							<li><a href="../wincontrol/index.htm">GUI部品</a></li>
							<li><a href="../verbs/index.html">手順一覧</a></li>
							<li><a href="../devenv/index.html">開発環境</a></li>
						</ul>
					</li>
				</ul>
			</div><!-- /.nav-collapse -->
		</div><!-- /.container -->
	</nav><!-- /.navbar -->

	<div id="main" class="container-fluid">
<!-- InstanceBeginEditable name="Content" -->
<div class="row">
	<div id="reftitle" class="col-md-12">
	  <ul class="breadcrumb" data-category="core">
	    <li><a href="../index.htm">プロデル</a></li>
	    <li><a href="index.htm">基本機能</a></li>
	    <li>正規表現</li>
      </ul>
	  <h1>正規表現</h1>
    </div>
	<div id="refsidebar" class="col-md-3">
		<p><a href="../static.htm" class="label label-info">静的種類</a> <a href="../sumire.htm" class="label label-info">スミレ</a></p>
	  <ul class="jumpnavi nav nav-pills"><li><a href="#head">概要</a></li><li><a href="#手順">手順</a></li><li><a href="#サンプルコード">サンプルコード</a></li></ul>
	</div>
	<div id="refcontent" class="col-md-8">
	  <h2 id="head">概要</h2>
		<p>正規表現による検索と置換に関する機能が利用できます。正規表現とは、対象の文字から指定した法則（パターン）と同じ文字を取り出す機能です。</p>
	  <p>正規表現を利用してパターンを指定して大量の文章から指定した単語などを取り出せます。</p>
		<p>利用する際に、このオブジェクトを作る必要はありません。</p>
		<h2 id="手順">手順</h2>
		<div id="methodlist"><a href="#合致する">合致する</a>　<a href="#取り出す">取り出す</a>　<a href="#区別して取り出す">区別して取り出す</a>　<a href="#子要素ごとに取り出す">子要素ごとに取り出す</a>　<a href="#区別して子要素ごとに取り出す">区別して子要素ごとに取り出す</a>　<a href="#置換する">置換する</a>　<a href="#無害化する">無害化する</a>　</div>
		<div id="methods">
			<h3>【文字】が【パターン】という【自分】に、<a name="合致する">合致する</a></h3>
			<p>指定したパターンに合致するかどうか判定します</p>
			<pre class="code">内容は「taro@abc.ne.jp」
もし内容が「.+@.+\.」という正規表現に合致するなら
　　「メールアドレスです」を情報アイコンで表示する
そうでなければ
 	「メールアドレスではありません」を警告アイコンで表示する
もし終わり</pre>
			<h3>【内容】から【パターン】という【自分】で、<a name="取り出す">取り出す</a>：配列</h3>
			<p>指定した内容からパターンに合致する部分を取り出します</p>
			<pre class="code">内容は「&lt;head&gt;header&lt;/head&gt;&lt;body&gt;content&lt;/body&gt;」

<em>ーーHTMLからタグとその内容を取り出します</em>
内容から「&lt;(.*)&gt;.*&lt;\/\1&gt;」という正規表現で取り出して要素にそれぞれ繰り返す
	要素を報告する
繰り返し終わり</pre>
			<h3>【内容】から【パターン】という【自分】で、<a name="区別して取り出す">区別して取り出す</a>：配列</h3>
			<p>指定した内容からパターンに大文字・小文字を区別して合致する部分を取り出します</p>
			<h3>【内容】から【パターン】という【自分】で、<a name="子要素ごとに取り出す">子要素ごとに取り出す</a>：2次配列</h3>
			<p>指定した内容からパターンに合致する部分を取り出します</p>
			<pre class="code">内容は「&lt;head&gt;header&lt;/head&gt;&lt;body&gt;content&lt;/body&gt;」

<em>ーーHTMLからタグ名だけを取り出します</em>
内容から「&lt;(.*)&gt;.*&lt;\/\1&gt;」という正規表現で子要素ごとに取り出して要素にそれぞれ繰り返す
　　要素を報告する
繰り返し終わり</pre>
			<h3>【内容】から【パターン】という【自分】で、<a name="区別して子要素ごとに取り出す">区別して子要素ごとに取り出す</a>：2次配列</h3>
			<p>指定した内容からパターンに大文字・小文字を区別して合致する部分を取り出します</p>
			<h3>【自分】で【内容】を【探すパターン】から【置換後のパターン】へ〈区別して〉、<a name="置換する">置換する</a></h3>
			<p>指定した内容から探すパターンに合致する箇所を置換後のパターンに従って、すべて置き換えます</p>
			<pre class="code"><em>ーー数字をすべてXに置き換えます</em>
内容は「電話番号は、1234-567-890。郵便番号は、987-6543です。」
正規表現で内容を「\d」から「X」へ置換して表示する</pre>
			<h3>【自分】で【内容】を<a name="無害化する">無害化する</a></h3>
			<p>指定した内容から正規表現として意味がある記号にエスケープ文字を付加します。</p>
			<pre class="code">正規表現で「\d」を無害化して表示する</pre>
			</div>
		<h2>正規表現のパターン</h2>
		<h3>パターンの書式</h3>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th class="items">正規表現</th>
              <th class="items">意味</th>
            </tr>
          </thead>
          <tr>
            <th>ABC</th>
            <td>ABCという文字列</td>
          </tr>
          <tr>
            <th>[ABC]</th>
            <td>A、B、Cのいずれか1文字</td>
          </tr>
          <tr>
            <th>[A-C]</th>
            <td>A～Cまでのいずれか1文字</td>
          </tr>
          <tr>
            <th>[^ABC]</th>
            <td>A、B、Cのいずれでもない任意の1文字</td>
          </tr>
          <tr>
            <th>.</th>
            <td>任意の1文字 (改行文字を除く)</td>
          </tr>
          <tr>
            <th>A+</th>
            <td>1文字以上のA</td>
          </tr>
          <tr>
            <th>A*</th>
            <td>0文字以上のA</td>
          </tr>
          <tr>
            <th>A?</th>
            <td>0文字または1文字のA</td>
          </tr>
          <tr>
            <th>^A</th>
            <td>Aで始まる文字列</td>
          </tr>
          <tr>
            <th>A$</th>
            <td>Aで終わる文字列</td>
          </tr>
          <tr>
            <th>ABC|DEF|GHI</th>
            <td>ABCまたはDEFまたはGHI</td>
          </tr>
          <tr>
            <th>A{2}</th>
            <td>2個のA（AA）</td>
          </tr>
          <tr>
            <th>A{2,}</th>
            <td>2個以上のA（AA、AAA、AAAA、...）</td>
          </tr>
          <tr>
            <th>A{2,3}</th>
            <td>2個～3個のA（AA、AAA）</td>
          </tr>
          <tr>
            <th>[\b]</th>
            <td>バックスペース</td>
          </tr>
        </table>
        <p>先頭に「\」を付けると特別な意味を表します。</p>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th class="items">正規表現</th>
              <th class="items">意味</th>
            </tr>
          </thead>
          <tr>
            <th>\b</th>
            <td>スペースなどの単語の区切り</td>
          </tr>
          <tr>
            <th>\B</th>
            <td>\b以外の文字</td>
          </tr>
          <tr>
            <th>\cA</th>
            <td>Ctrl-A</td>
          </tr>
          <tr>
            <th>\d</th>
            <td>任意の数値（[0-9]と同じ）</td>
          </tr>
          <tr>
            <th>\D</th>
            <td>数値以外の文字（[^0-9]と同じ）</td>
          </tr>
          <tr>
            <th>\f</th>
            <td>フォームフィード文字</td>
          </tr>
          <tr>
            <th>\n</th>
            <td>改行文字</td>
          </tr>
          <tr>
            <th>\r</th>
            <td>復帰文字</td>
          </tr>
          <tr>
            <th>\s</th>
            <td>区切り文字(スペース、タブ、改行)<br>
              （[ \f\n\r\t\v]と同じ）</td>
          </tr>
          <tr>
            <th>\S</th>
            <td>\s以外の1文字<br>
              ([^ \n\r\f\t] と同じ)</td>
          </tr>
          <tr>
            <th>\t</th>
            <td>タブ文字</td>
          </tr>
          <tr>
            <th>\v</th>
            <td>垂直タブ文字</td>
          </tr>
          <tr>
            <th>\w</th>
            <td>英数文字（[A-Za-z0-9_]と同じ）</td>
          </tr>
          <tr>
            <th>\W</th>
            <td>\w以外の文字</td>
          </tr>
          <tr>
            <th>\2</th>
            <td>2番目の (...) にマッチした文字列</td>
          </tr>
          <tr>
            <th>\o033</th>
            <td>8進数で033にあたる文字</td>
          </tr>
          <tr>
            <th>\x1b</th>
            <td>16進数で1bにあたる文字</td>
          </tr>
          <tr>
            <th>\その他</th>
            <td>その他の文字自身</td>
          </tr>
        </table>
        <p>　</p>
        <h2 id="サンプルコード">サンプルコード</h2>
		<div id="samples">
        <p><a href="../core/regexp.htm#取り出す">「取り出し」手順</a>を使うことで、正規表現を使った文字列の取得ができます。</p>
        <h3 id="lookup1">HTMLからタグを取り出す</h3>
        <p>正規表現で簡易的にHTMLのタグを取り出します。</p>
        <pre class="code">タグ一覧は、正規表現：「&lt;b&gt;abc&lt;/b&gt;&lt;i&gt;def&lt;/i&gt;」 から「&lt;(.*)&gt;(.*)&lt;\/\1&gt;」を取り出したもの
タグ一覧を要素にそれぞれ繰り返す
　　要素を報告する
繰り返し終わり</pre>
        <h3 id="lookup2">住所から郵便番号だけを取り出す</h3>
        <p>正規表現で住所から郵便番号の部分だけを取り出します。</p>
        <pre class="code"><span class="rem">ーー郵便番号のみを取り出します</span>
内容は「〒123-4567　東○都○代田区9-99-9　山○太郎」
正規表現によって内容から「\d{3}-\d{4}」を取り出して要素にそれぞれ繰り返す
　　要素を報告する
繰り返し終わり</pre>
        <h2>サブマッチ「（　）」の使い方</h2>
        <p>サブマッチは、正規表現で取り出した文字列からより細かく文字を取り出したいときに利用します。サブマッチを利用するときは「<a href="../core/regexp.htm#子要素ごとに取り出す">子要素ごとに取り出す</a>」手順を使います。</p>
        <p>パターンを「( )」で囲うことで、その部分だけをサブマッチとして配列に格納できます。サブマッチは、パターン内で利用することもでき、例えば「\1」は、１番目の「( )」の内容と同じことを表します。</p>
        <h3 id="lookup3">サブマッチで電話番号を細かく分解する</h3>
        <p>電話番号を分解して、<font color="#FF0000">市外局番(03)</font>・<font color="#008000">市内局番(1234)</font>・<font color="#0000FF">番号(5678)</font>の順に配列に保存します。結果は「<font color="#FF0000">03</font>,<font color="#008000">1234</font>,<font color="#0000FF">5678</font>」と表されます。</p>
        <pre class="code"><span class="rem">ーー電話番号を細かく分解する</span>
電話番号配列は、正規表現によって「03-1234-5678」から「「<font color="#ff0000">(</font><font color="#ff0000">[</font><font color="#ff0000">0-9</font><font color="#ff0000">]</font><font color="#ff0000">*)</font>-<font color="#008000">(</font><font color="#008000">[</font><font color="#008000">0-9</font><font color="#008000">]</font><font color="#008000">*)</font>-<font color="#0000ff">(</font><font color="#0000ff">[</font><font color="#0000ff">0-9</font><font color="#0000ff">]</font><font color="#0000ff">*)</font>」」を子要素ごとに取り出したもの
電話番号配列を要素にそれぞれ繰り返す
　　要素(1)&amp;要素(2)&amp;要素(3)を報告する
繰り返し終わり</pre>
        <h3 id="lookup4">HTMLからタグ名とその内容を取り出す</h3>
        <p>HTMLから対になるタグ(&lt;head&gt;&lt;/head&gt;や&lt;body&gt;&lt;/body&gt;)を探して、タグの名前とその内容を取り出します。</p>
        <p>対になるタグを探すために「&lt;(.*)&gt;～&lt;\/\1&gt;」というパターンを指定しています。</p>
        <pre class="code">内容は「&lt;head&gt;ヘッダです。&lt;/head&gt;&lt;body&gt;本体です。&lt;/body&gt;」
タグ一覧は（正規表現によって内容から「&lt;(.*)&gt;(.*)&lt;\/\1&gt;」を子要素ごとに取り出したもの）
タグ一覧を要素にそれぞれ繰り返す
　　「[要素(1)]=&gt;[要素(2)]」を報告する
繰り返し終わり</pre>
        <p>なお、タグの間に改行が含まれる場合は、マッチしません。次の「最短一致」の例をご覧ください。</p>
        <p><strong>関連項目</strong>　<a href="../core/regexp.htm#子要素ごとに取り出す">子要素ごとに取り出す</a></p>
        <h3 id="lookup5">最短一致で検索する</h3>
        <p>通常、正規表現では、パターンに合致する最も長い部分で取り出そうとします。最も短い部分に合致するようにするためには、数の指定または*の直後に「?」を付けます。</p>
        <p>次の例の場合「にわ」が複数含まれますが「.*」は以降の「にわ」にも合致しますので、すべて取り出され、最も長い部分が結果となります。</p>
        <pre class="code">結果は、正規表現：「にわにはにわにわとりがいる」から「にわ.*」を取り出したもの
結果を要素にそれぞれ繰り返す
　　要素を報告する
繰り返し終わり</pre>
        <p>次の例の場合は、先頭の「にわ」の後にある「にわ」がパターンにある「にわ」に合致しますので、最も短い部分で取り出され、結果は3つとなります。</p>
        <pre class="code">結果は、正規表現：「にわにはにわにわとりがいる」から「にわ.*?」を取り出したもの
結果を要素にそれぞれ繰り返す
　　要素を報告する
繰り返し終わり</pre>
        <h3 id="lookup6">HTMLから&lt;body&gt;タグの内容を取り出す</h3>
        <p>&nbsp;</p>
        <pre class="code">内容は「&lt;html&gt;&lt;body&gt;こんにちは太郎です。［改行］よろしくどうぞ。&lt;/body&gt;&lt;html&gt;」
本文内容は、内容から「「&lt;body&gt;([\s\S]*?)&lt;\/body&gt;」」という正規表現で子要素ごとに取り出したもの
本文内容を要素にそれぞれ繰り返す
　　要素(1)を報告する
繰り返し終わり</pre>
        <p>　</p>
		</div><!--/samples-->
        <hr>
        <p><b>参考文献</b><br>
          Microsoft <a href="https://msdn.microsoft.com/ja-jp/library/cc392020.aspx">MSDNライブラリ-「正規表現の構文」</a><br>
          杜甫々氏　<a href="https://www.tohoho-web.com/js/index.htm">とほほのJavaScriptリファレンス</a>－<a href="https://www.tohoho-web.com/js/regexp.htm">正規表現（RegExp）</a></p>
        <p>&nbsp;</p>
	</div>
</div>
<div class="footer text-right"><!-- #BeginDate format:Ja2 -->2023年5月22日 <!-- #EndDate -->更新</div><!-- InstanceEndEditable -->
		<p id="page-top"><a href="#">ページ先頭へ</a></p>
		<footer>
    		<hr>
			<p class="text-muted text-right"><a href="https://produ.irelang.jp/">プロデル</a> Ver.1.9 &copy; 2007-2023 utopiat.net.</p>
		</footer>
	</div><!--/.container-->
	<script src="../js/jquery-1.12.4.min.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/ie10-viewport-bug-workaround.js"></script>
	<script src="../js/script.js"></script>
    <script src="../js/syntax-highlight.js"></script>
<!-- InstanceBeginEditable name="Script" -->

<!-- InstanceEndEditable -->
</body>
<!-- InstanceEnd --></html>
